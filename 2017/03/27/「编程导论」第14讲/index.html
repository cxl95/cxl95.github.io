<!doctype html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="编程导论," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="article">
<meta property="og:title" content="「编程导论」第14讲 二叉树">
<meta property="og:url" content="http://yoursite.com/2017/03/27/「编程导论」第14讲/index.html">
<meta property="og:site_name" content="NoneTone">
<meta property="og:image" content="http://yoursite.com/2017/03/27/「编程导论」第14讲/14.jpg">
<meta property="og:image" content="http://yoursite.com/2017/03/27/「编程导论」第14讲/14-1.jpg">
<meta property="og:updated_time" content="2017-03-28T02:23:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="「编程导论」第14讲 二叉树">
<meta name="twitter:image" content="http://yoursite.com/2017/03/27/「编程导论」第14讲/14.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/03/27/「编程导论」第14讲/"/>





  <title> 「编程导论」第14讲 二叉树 | NoneTone </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">NoneTone</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/27/「编程导论」第14讲/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaolin Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="NoneTone">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                「编程导论」第14讲 二叉树
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-27T10:17:15+08:00">
                2017-03-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/coding/" itemprop="url" rel="index">
                    <span itemprop="name">coding</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <img src="/2017/03/27/「编程导论」第14讲/14.jpg" alt="14.jpg" title="">
<a id="more"></a>
<h2 id="Tree-definition"><a href="#Tree-definition" class="headerlink" title="Tree definition"></a>Tree definition</h2><ul>
<li>A tree consists of one or more nodes <ul>
<li>A node typically has a value associated with it</li>
</ul>
</li>
<li>Nodes are connected by branches</li>
<li>A tree starts with root node</li>
<li>Except for leaves, each node has one or more children <ul>
<li>We refer to a node which has a child  as the parent  node</li>
</ul>
</li>
<li>In simple trees, no child has more than one parent, but the generalization(often called a graph) is also very useful</li>
</ul>
<img src="/2017/03/27/「编程导论」第14讲/14-1.jpg" alt="14-1.jpg" title="">
<h2 id="Binary-trees"><a href="#Binary-trees" class="headerlink" title="Binary trees"></a>Binary trees</h2><ul>
<li>A binary tree is a special version of a tree, where each node has at most two children</li>
<li>Binary trees are very useful when storing and searching ordered data, or when determining the best decision to make in solving many classes of problems<ul>
<li>such trees are often called decision trees</li>
</ul>
</li>
</ul>
<h2 id="Binary-tree-class"><a href="#Binary-tree-class" class="headerlink" title="Binary tree class"></a>Binary tree class</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">binaryTree</span><span class="params">(object)</span>:</span></div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value)</span>:</span></div><div class="line">         self.value = value</div><div class="line">         self.leftBranch = <span class="keyword">None</span></div><div class="line">         self.rightBranch = <span class="keyword">None</span></div><div class="line">         self.parent = <span class="keyword">None</span></div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">setLeftBranch</span><span class="params">(self, node)</span>:</span></div><div class="line">         self.leftBranch = node</div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">setRightBranch</span><span class="params">(self, node)</span>:</span></div><div class="line">         self.rightBranch = node</div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">setParent</span><span class="params">(self, parent)</span>:</span></div><div class="line">         self.parent = parentj</div><div class="line">      <span class="comment"># and other methods</span></div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">getValue</span><span class="params">(self)</span>:</span></div><div class="line">         <span class="keyword">return</span> self.value</div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">getLeftBranch</span><span class="params">(self)</span>:</span></div><div class="line">         <span class="keyword">return</span> self.leftBranch</div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">getRightBranch</span><span class="params">()</span>:</span></div><div class="line">         <span class="keyword">return</span> self.rightBranch</div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">getParent</span><span class="params">(self)</span>:</span></div><div class="line">         <span class="keyword">return</span> self.parent</div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">         <span class="keyword">return</span> self.value</div></pre></td></tr></table></figure>
<h2 id="Searching-a-tree"><a href="#Searching-a-tree" class="headerlink" title="Searching a tree"></a>Searching a tree</h2><ul>
<li>Imagine we want to examine a tree<ul>
<li>To determine if an element is parent</li>
<li>To find a path to a soluion point</li>
<li>To make a series of decision to reach some objective</li>
</ul>
</li>
<li>Depth first search<ul>
<li>start with the root </li>
<li>At any node, if we haven’t reached our objective, take the left branch first</li>
<li>When get to a leaf, backtrack to the first decision point and take the right branch </li>
</ul>
</li>
<li>Breadth frist search<ul>
<li>Start with the root </li>
<li>Then proceed to each child at the next level, in order </li>
<li>Continue until reach objective</li>
</ul>
</li>
</ul>
<h2 id="Depth-first-search-for-containment"><a href="#Depth-first-search-for-containment" class="headerlink" title="Depth first search for containment"></a>Depth first search for containment</h2><ul>
<li>Idea is to keep a data structure (called a stack) that. holds nodes still to be explored</li>
<li>Use an evaluation function to determine when reach objective (i.e. for containment, whether value of node is equal to desired value)</li>
<li>Start with the root node</li>
<li>Then add children, if any, to front of data structure, with left branch first</li>
<li>Continue in this manner </li>
</ul>
<h2 id="DFS-Code"><a href="#DFS-Code" class="headerlink" title="DFS Code"></a>DFS Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">DFSBinary</span><span class="params">(root, fcn)</span>:</span></div><div class="line">    stack = [root]</div><div class="line">    <span class="keyword">while</span> len(stack)&gt;<span class="number">0</span>:</div><div class="line">        <span class="keyword">if</span> fcn(stack[<span class="number">0</span>]):</div><div class="line">            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            temp = stack.pop(<span class="number">0</span>)</div><div class="line">            <span class="keyword">if</span> temp.getRightBranch():</div><div class="line">                stack.insert(<span class="number">0</span>, temp.getRightBranch())</div><div class="line">            <span class="keyword">if</span> temp.getLeftBranch():</div><div class="line">                stack.insert(<span class="number">0</span>, temp.getLeftBranch())</div><div class="line">    <span class="keyword">return</span> <span class="keyword">False</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">DFSBinaryPath</span><span class="params">(root, fcn)</span>:</span></div><div class="line">   stack = [root]</div><div class="line">   <span class="keyword">while</span> len(stack)&gt;<span class="number">0</span>:</div><div class="line">      <span class="keyword">print</span> <span class="string">'at node '</span> + str(stack[<span class="number">0</span>].getValue())</div><div class="line">      <span class="keyword">if</span> fcn(stack[<span class="number">0</span>]):</div><div class="line">         <span class="keyword">return</span> TracePath(stack[<span class="number">0</span>])</div><div class="line">      <span class="keyword">else</span>:</div><div class="line">         temp = stack.pop(<span class="number">0</span>)</div><div class="line">         <span class="keyword">if</span> temp.getRightBranch():</div><div class="line">            stack.insert(<span class="number">0</span>, temp.getRightBranch())</div><div class="line">         <span class="keyword">if</span> temp.getLeftBranch():</div><div class="line">            stack.insert(<span class="number">0</span>, temp.getLeftBranch())</div><div class="line">   <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">TracePath</span><span class="params">(node)</span>:</span></div><div class="line">   <span class="keyword">if</span> <span class="keyword">not</span> node.getParent():</div><div class="line">      <span class="keyword">return</span> [node]</div><div class="line">   <span class="keyword">else</span>:</div><div class="line">      <span class="keyword">return</span> [node] + TracePath(node.getParent())</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">DFSBinaryOrdered</span><span class="params">(root, fcn, ItFcn)</span>:</span></div><div class="line">   stack = [root]</div><div class="line">   <span class="keyword">while</span> len(stack)&gt;<span class="number">0</span>:</div><div class="line">      <span class="keyword">print</span> <span class="string">'at node '</span> + str(stack[<span class="number">0</span>].getValue())</div><div class="line">      <span class="keyword">if</span> fcn(stack[<span class="number">0</span>]):</div><div class="line">         <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">      <span class="keyword">elif</span> ItFcn(stack[<span class="number">0</span>]):</div><div class="line">         temp = stack.pop(<span class="number">0</span>)</div><div class="line">         <span class="keyword">if</span> temp.getLeftBranch():</div><div class="line">            stack.insert(<span class="number">0</span>, temp.getLeftBranch())</div><div class="line">         <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">if</span> temp.getRightBranch():</div><div class="line">            stack.insert(<span class="number">0</span>, temp.getRightBranch())</div><div class="line">   <span class="keyword">return</span> <span class="keyword">False</span></div></pre></td></tr></table></figure>
<h2 id="BFS-Code"><a href="#BFS-Code" class="headerlink" title="BFS Code"></a>BFS Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">BFSBinary</span><span class="params">(root, fcn)</span>:</span></div><div class="line">    queue = [root]</div><div class="line">    <span class="keyword">while</span> len(queue)&gt;<span class="number">0</span>:</div><div class="line">        <span class="keyword">if</span> fcn(queue[<span class="number">0</span>]):</div><div class="line">            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            temp = queue.pop(<span class="number">0</span>)</div><div class="line">            <span class="keyword">if</span> temp.getLeftBranch():</div><div class="line">                queue.append(temp.getLeftBranch())</div><div class="line">            <span class="keyword">if</span> temp.getRightBranch():</div><div class="line">                queue.append(temp.getRightBranch())</div><div class="line">    <span class="keyword">return</span> <span class="keyword">False</span></div></pre></td></tr></table></figure>
<h2 id="Ordered-search"><a href="#Ordered-search" class="headerlink" title="Ordered search"></a>Ordered search</h2><ul>
<li>Suppose we know that the tree is ordered, meaning that for any node, all the nodes to the “left” are less than that node’s value, and all the nodes to the “right” are greater than that node’s value</li>
</ul>
<h2 id="Decision-Trees"><a href="#Decision-Trees" class="headerlink" title="Decision Trees"></a>Decision Trees</h2><ul>
<li>A decision tree is a special type of binary tree (though could be more general tree with mutiple children)</li>
<li>At each node, a decision is made, with a positive desicion taking the left branch, and a negative decision taking the right branch</li>
<li>When we reach a leaf or a node that satisfies some goal, the path back to the root node defines the solution to the problem captured by the tree</li>
</ul>
<h2 id="Building-a-decision-tree"><a href="#Building-a-decision-tree" class="headerlink" title="Building a decision tree"></a>Building a decision tree</h2><ul>
<li>One way to approach decision trees is to construct an actual tree, then search it </li>
<li>An alternative is to implicitly build the tree as needed</li>
<li>As an example , we will build a decision tree for a knapsack problem</li>
</ul>
<h2 id="The-Knapsack-Problem"><a href="#The-Knapsack-Problem" class="headerlink" title="The Knapsack Problem"></a>The Knapsack Problem</h2><ul>
<li>Suppose we are given a set of objects, each with a value and a weight</li>
<li>We have a finite sized knapsack, into which we want to store some of the items</li>
<li>We want to store the items that have the most value, subject to the constraint that there is a limit to the cumulative size that will fit</li>
</ul>
<ul>
<li>For the knapsack problem , we can build a decision tree as follows:<ul>
<li>At the root level, we decide whether to include the first element (left branch) or not (right branch) </li>
<li>At the nth level, we make the same decision for the nth element</li>
<li>By keeping track of what we have included so far, and what we have left to consider, we can generate a binary tree of decisions</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">buildDTree</span><span class="params">(sofar, todo)</span>:</span></div><div class="line">   <span class="keyword">if</span> len(todo) == <span class="number">0</span>:</div><div class="line">      <span class="keyword">return</span> binaryTree(sofar)</div><div class="line">   <span class="keyword">else</span>:</div><div class="line">      withelt = buildDTree(sofar + [todo[<span class="number">0</span>]], todo[<span class="number">1</span>:])</div><div class="line">      withoutelt = buildDTree(sofar, [todo[<span class="number">1</span>:]])</div><div class="line">      here = binaryTree(sofar)</div><div class="line">      here.setLeftBranch(withelt)</div><div class="line">      here.setRightBranch(withoutelt)</div><div class="line">      <span class="keyword">return</span> here</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">DFSDTree</span><span class="params">(root, valueFcn, constraintFcn)</span>:</span></div><div class="line">   stack = [root]</div><div class="line">   best = <span class="keyword">None</span></div><div class="line">   visited = <span class="number">0</span></div><div class="line">   <span class="keyword">while</span> len(queue) &gt; <span class="number">0</span>:</div><div class="line">      visited += <span class="number">1</span></div><div class="line">      <span class="keyword">if</span> constraintFcn(stack[<span class="number">0</span>].getValue()):</div><div class="line">         <span class="keyword">if</span> best == <span class="keyword">None</span>:</div><div class="line">            best = stack[<span class="number">0</span>]</div><div class="line">         <span class="keyword">elif</span> valueFcn(stack[<span class="number">0</span>].getValue()) &gt; valueFcn(best.getValue()):</div><div class="line">            best = stack[<span class="number">0</span>]</div><div class="line">         temp = stack.pop(<span class="number">0</span>)</div><div class="line">         <span class="keyword">if</span> temp.getRightBranch():</div><div class="line">            queue.insert(<span class="number">0</span>, temp.getRightBranch())</div><div class="line">         <span class="keyword">if</span> temp.getLeftBranch():</div><div class="line">            queue.insert(<span class="number">0</span>, temp.getLeftBranch())</div><div class="line">      <span class="keyword">else</span>:</div><div class="line">         stack.pop(<span class="number">0</span>)</div><div class="line">   <span class="keyword">print</span> <span class="string">'visited'</span>, visited</div><div class="line">   <span class="keyword">return</span> best</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">BFSDTree</span><span class="params">(root, valueFcn, constraintFcn)</span>:</span></div><div class="line">   queue = [root]</div><div class="line">   best = <span class="keyword">None</span></div><div class="line">   visited = <span class="number">0</span></div><div class="line">   <span class="keyword">while</span> len(queue) &gt; <span class="number">0</span>:</div><div class="line">      visited += <span class="number">1</span></div><div class="line">      <span class="keyword">if</span> constraintFcn(queue[<span class="number">0</span>].getValue()):</div><div class="line">         <span class="keyword">if</span> best == <span class="keyword">None</span>:</div><div class="line">            best = queue[<span class="number">0</span>]</div><div class="line">            <span class="keyword">print</span> best.getValue()</div><div class="line">         <span class="keyword">elif</span> valueFcn(queue[<span class="number">0</span>].getValue()) &gt; valueFcn(best.getValue()):</div><div class="line">            best = queue[<span class="number">0</span>]</div><div class="line">            <span class="keyword">print</span> best.getValue()</div><div class="line">         temp = queue.pop(<span class="number">0</span>)</div><div class="line">         <span class="keyword">if</span> temp.getLeftBranch():</div><div class="line">            queue.append(temp.getLeftBranch())</div><div class="line">         <span class="keyword">if</span> temp.getRightBranch():</div><div class="line">            queue.append(temp.getRightBranch())</div><div class="line">      <span class="keyword">else</span>:</div><div class="line">         queue.pop(<span class="number">0</span>)</div><div class="line">   <span class="keyword">print</span> <span class="string">'visited'</span>, visited</div><div class="line">   <span class="keyword">return</span> best</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">a = [<span class="number">6</span>, <span class="number">3</span>]</div><div class="line">b = [<span class="number">7</span>, <span class="number">2</span>]</div><div class="line">c = [<span class="number">8</span>, <span class="number">4</span>]</div><div class="line">d = [<span class="number">9</span>, <span class="number">5</span>]</div><div class="line"></div><div class="line">treeTest = buildDTree([], [a, b, c, d])</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sumValues</span><span class="params">(lst)</span>:</span></div><div class="line">   vals = [e[<span class="number">0</span>] <span class="keyword">for</span> e <span class="keyword">in</span> lst]</div><div class="line">   <span class="keyword">return</span> sum(vals)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">WeightBelow10</span><span class="params">(lst)</span>:</span></div><div class="line">   wts = [e[<span class="number">1</span>] <span class="keyword">for</span> e <span class="keyword">in</span> lst]</div><div class="line">   <span class="keyword">return</span> sum(wts) &lt;= <span class="number">10</span></div><div class="line"></div><div class="line">foo = DFSDTree(treeTest, sumValues, WeightBelow10)</div><div class="line">foo1 = BFSDTree(treeTest, sumValues, WeightBelow10)</div></pre></td></tr></table></figure>
<h2 id="Decision-Trees-1"><a href="#Decision-Trees-1" class="headerlink" title="Decision Trees"></a>Decision Trees</h2><ul>
<li>Depth first and breadth frist still search the same number of nodes, the order is simply different</li>
<li>If we are willing to settle for “good enough”, then there is a difference in work done by the two search methods.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">DFSDTreeGoodEnough</span><span class="params">(root, valueFcn, constraintFcn, stop)</span>:</span></div><div class="line">   stack = [root]</div><div class="line">   best = <span class="keyword">None</span></div><div class="line">   visited = <span class="number">0</span></div><div class="line">   <span class="keyword">while</span> len(stack) &gt; <span class="number">0</span>:</div><div class="line">      visited += <span class="number">1</span></div><div class="line">      <span class="keyword">if</span> constraintFcn(stack[<span class="number">0</span>].getValue()):</div><div class="line">         <span class="keyword">if</span> best == <span class="keyword">None</span>:</div><div class="line">            best = stack[<span class="number">0</span>]</div><div class="line">            <span class="keyword">print</span> best.getValue()</div><div class="line">         <span class="keyword">elif</span> valueFcn(stack[<span class="number">0</span>].getValue()) &gt; valueFcn(best.getValue()):</div><div class="line">            best = stack[<span class="number">0</span>]</div><div class="line">            <span class="keyword">print</span> best.getValue()</div><div class="line">         <span class="keyword">if</span> stop(best.getValue()):</div><div class="line">            <span class="keyword">return</span> best</div><div class="line">         temp = stack.pop(<span class="number">0</span>)</div><div class="line">         <span class="keyword">if</span> temp.getRightBranch():</div><div class="line">            stack.insert(<span class="number">0</span>, temp.getRightBranch())</div><div class="line">         <span class="keyword">if</span> temp.getLeftBranch():</div><div class="line">            stack.insert(<span class="number">0</span>, temp.getLeftBranch())</div><div class="line">      <span class="keyword">else</span>:</div><div class="line">         stack.pop(<span class="number">0</span>)</div><div class="line">   <span class="keyword">print</span> <span class="string">'visited'</span>, visited</div><div class="line">   <span class="keyword">return</span> best</div></pre></td></tr></table></figure>
<h2 id="Search-an-implicit-tree"><a href="#Search-an-implicit-tree" class="headerlink" title="Search an implicit tree"></a>Search an implicit tree</h2><ul>
<li>Our approach is inefficient, as it constructs the entire decision tree, and then searches it </li>
<li>An alternative is only generate the nodes of the tree as needed</li>
<li>Here is an example for the case of a knapsack problem, the same idea could be captured in other search problems</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">DTImplicit</span><span class="params">(toConsider, avail)</span>:</span></div><div class="line">   <span class="comment">#return value of solution, and solution</span></div><div class="line">   <span class="keyword">if</span> toConsider == [] <span class="keyword">or</span> avail == <span class="number">0</span>:</div><div class="line">      result = (<span class="number">0</span>, ())</div><div class="line">   <span class="keyword">elif</span> toConsider[<span class="number">0</span>][<span class="number">1</span>] &gt; avail:</div><div class="line">      result = DTImplicit(toConsider[<span class="number">1</span>:], avail)</div><div class="line">   <span class="keyword">else</span>:</div><div class="line">      nextItem = toConsider[<span class="number">0</span>]</div><div class="line">      witVal, withToTake = DTImplicit(toConsider[<span class="number">1</span>:], avail - nextItem[<span class="number">1</span>])<span class="comment">#序列赋值</span></div><div class="line">      withVal += nextItem[<span class="number">0</span>]</div><div class="line">      withoutVal, withoutToTake = DTImplicit(toConsider[<span class="number">1</span>:], avail)</div><div class="line">      <span class="keyword">if</span> withVal &gt; withoutVal:</div><div class="line">         result = (withVal, withToTake + (nextItem,))</div><div class="line">      <span class="keyword">else</span>:</div><div class="line">         result = (withoutVal, withToTake)</div><div class="line">   <span class="keyword">return</span> result</div></pre></td></tr></table></figure>
<h2 id="What-if-our-trees-are-overgrown"><a href="#What-if-our-trees-are-overgrown" class="headerlink" title="What if our trees are overgrown"></a>What if our trees are overgrown</h2><ul>
<li>We have been explicitly assuming that there are no “loops” in our trees, i.e. that a child has one parent, and that no node is the parent of a child closer to the root</li>
<li>What if we relax this constraint?</li>
<li>Generalization is called a graph<ul>
<li>Lots of great graph search problems</li>
<li>For now, we can think about ways to support search for binary trees that might have loops</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">DFSBinaryNoLoop</span><span class="params">(root, fcn)</span>:</span></div><div class="line">   stack = [root]</div><div class="line">   seen = []</div><div class="line">   <span class="keyword">while</span> len(stack)&gt;<span class="number">0</span>:</div><div class="line">      <span class="keyword">print</span> <span class="string">'at node '</span> + str(stack[<span class="number">0</span>].getValue())</div><div class="line">      <span class="keyword">if</span> fcn(stack[<span class="number">0</span>]):</div><div class="line">         <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">      <span class="keyword">else</span>:</div><div class="line">         temp = stack.pop(<span class="number">0</span>)</div><div class="line">         seen.append(temp)</div><div class="line">         <span class="keyword">if</span> temp.getRightBranch():</div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> temp.getRightBranch() <span class="keyword">in</span> seen:</div><div class="line">               stack.insert(<span class="number">0</span>, temp.getRightBranch())</div><div class="line">         <span class="keyword">if</span> temp.getLeftBranch():</div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> temp.getLeftBranch() <span class="keyword">in</span> seen:</div><div class="line">               stack.insert(<span class="number">0</span>, temp.getLeftBranch())</div><div class="line">   <span class="keyword">return</span> <span class="keyword">False</span></div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/编程导论/" rel="tag"># 编程导论</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/25/问卷设计/" rel="next" title="谋定而后动——问卷设计">
                <i class="fa fa-chevron-left"></i> 谋定而后动——问卷设计
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Xiaolin Chen" />
          <p class="site-author-name" itemprop="name">Xiaolin Chen</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Tree-definition"><span class="nav-number">1.</span> <span class="nav-text">Tree definition</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Binary-trees"><span class="nav-number">2.</span> <span class="nav-text">Binary trees</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Binary-tree-class"><span class="nav-number">3.</span> <span class="nav-text">Binary tree class</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Searching-a-tree"><span class="nav-number">4.</span> <span class="nav-text">Searching a tree</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Depth-first-search-for-containment"><span class="nav-number">5.</span> <span class="nav-text">Depth first search for containment</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DFS-Code"><span class="nav-number">6.</span> <span class="nav-text">DFS Code</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BFS-Code"><span class="nav-number">7.</span> <span class="nav-text">BFS Code</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ordered-search"><span class="nav-number">8.</span> <span class="nav-text">Ordered search</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Decision-Trees"><span class="nav-number">9.</span> <span class="nav-text">Decision Trees</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Building-a-decision-tree"><span class="nav-number">10.</span> <span class="nav-text">Building a decision tree</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Knapsack-Problem"><span class="nav-number">11.</span> <span class="nav-text">The Knapsack Problem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Decision-Trees-1"><span class="nav-number">12.</span> <span class="nav-text">Decision Trees</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Search-an-implicit-tree"><span class="nav-number">13.</span> <span class="nav-text">Search an implicit tree</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What-if-our-trees-are-overgrown"><span class="nav-number">14.</span> <span class="nav-text">What if our trees are overgrown</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xiaolin Chen</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
